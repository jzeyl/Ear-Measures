for(i in seq_along(volumestocopy)){
file.copy(volumestocopy[i],paste0(outputdir,"/",folders[i]))
}
d<-list.files(directs, pattern = ".pca", recursive = TRUE, full.names = TRUE)
direct<-"E:/24082020 Jeff CT scans"
d<-list.files(direct, pattern = ".pca", recursive = TRUE, full.names = TRUE)
d
vol<-list.files(direct, pattern = ".vol", recursive = TRUE, full.names = TRUE)
vol
dir<-"E:/August scans"
IDs<-list.dirs(dir, full.names = FALSE)
IDs
d<-list.files(direct, pattern = ".pca", recursive = TRUE, full.names = TRUE)
d
d<-list.files(direct, pattern = ".pca", recursive = TRUE, full.names = TRUE)
direct<-"E:/24082020 Jeff CT scans"
d<-list.files(direct, pattern = ".pca", recursive = TRUE, full.names = TRUE)
d
direct<-"E:/August scans/24082020 Jeff CT scans"
d<-list.files(direct, pattern = ".pca", recursive = TRUE, full.names = TRUE)
d
#create folder and add files to these
inputdirect<-"E:/Input/Jun25_2020"
dir.create(inputdirect)
inputdirect<-"E:/Input/Aug24_2020"
dir.create(inputdirect)
list.dir("D:/August scans backup/Aug 24)
list.dir("D:/August scans backup/Aug 24")
list.dirs("D:/August scans backup/Aug 24")
list.dirs("D:/August scans backup/Aug 24", full.names = F)
list.dirs("D:/August scans backup/Aug 24", full.names = F, recursive = F)
YNA <-  "D:/August scans backup/Aug 24/1 YNA/earcrp/"
WBC  <-  "D:/August scans backup/Aug 24/2 WBC/earcrp/"
FE<-    "D:/August scans backup/Aug 24/3 PE/earcrp/"
SA01 <-"D:/August scans backup/Aug 24/SA-01-2019/earcrp/"
VE01<-"D:/August scans backup/Aug 24/VE-01-2019/earcrp/"
ls()
directs<-c(FE     ,   SA01   ,     VE01  ,      WBC  ,       YNA )
ls()
directs<-c(FE     ,   SA01   ,     VE01  ,      WBC  ,       YNA )
folders<-c("FE" , "SA01"  ,      "VE01"    ,    "WBC"    ,     "YNA" )
inputdirect
for (i in seq_along(folders)){
dir.create(paste0(inputdirect,"/",folders[i]))
}
#FCSV - put lists of files for each species into a master list of lists
fcsvmasterlist<-list()
for (i in seq_along(directs)){
fcsvmasterlist[[i]]<-list.files(directs[i], pattern = ".fcsv", recursive = FALSE, full.names = TRUE)
}
#FCSV - place the files directly in the folders assigned to them
for (i in seq_along(fcsvmasterlist)){
for (j in seq_along(1:10)){
file.copy(fcsvmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
fcsvmasterlist
directs
FE<-    "D:/August scans backup/Aug 24/3 FE/earcrp"
directs<-c(FE     ,   SA01   ,     VE01  ,      WBC  ,       YNA )
folders<-c("FE" , "SA01"  ,      "VE01"    ,    "WBC"    ,     "YNA" )
#FCSV - put lists of files for each species into a master list of lists
fcsvmasterlist<-list()
for (i in seq_along(directs)){
fcsvmasterlist[[i]]<-list.files(directs[i], pattern = ".fcsv", recursive = FALSE, full.names = TRUE)
}
fcsvmasterlist
#FCSV - place the files directly in the folders assigned to them
for (i in seq_along(fcsvmasterlist)){
for (j in seq_along(1:10)){
file.copy(fcsvmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
#STL - put lists of files for each species into a master list of lists
stlmasterlist<-list()
for (i in seq_along(directs)){
stlmasterlist[[i]]<-list.files(directs[i], pattern = ".stl", recursive = FALSE, full.names = TRUE)
}
#STL - place the files directly in the folders assigned to them
for (i in seq_along(stlmasterlist)){
for (j in seq_along(1:10)){
file.copy(stlmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
direct<-"D:/August scans backup/Aug 25"
allfolders<-list.dirs(direct, recursive = F)
allfolders
allfolders<-list.dirs(direct, recursive = T)
direct<-"E:/August scans backup/Aug 25"
allfolders<-list.dirs(direct, recursive = F)
fileindex<-1
#volume file
l1<-paste0("open=[",list.files(allfolders[fileindex], pattern = ".vol", full.names = T),"]")
l1
writeClipboard(l1)
writeClipboard(l1)
run<-"run("Raw...", ""
run<-'run("Raw...", "'
run
run<-'run\("Raw...", "'
run<-'run\\("Raw...", "'
run
writeClipboard(l1)
d<-list.files(allfolders[[fileindex]], pattern = ".vgi", full.names = T)
k<-readLines(d)[3]
writeClipboard(readLines(d)[3])
split<-strsplit(k, " ")
imagesize<-paste0("image=[16-bit Unsigned] ",
"width=",split[[1]][3], " height=",split[[1]][4], " number=",split[[1]][5],
" little-endian")
d
imagesize
writeClipboard(imagesize)
d<-list.files(allfolders[[fileindex]], pattern = ".vgi", full.names = T)
k<-readLines(d)[3]
writeClipboard(readLines(d)[3])
split<-strsplit(k, " ")
imagesize<-paste0(" image=[16-bit Unsigned] ",
"width=",split[[1]][3], " height=",split[[1]][4], " number=",split[[1]][5],
" little-endian")
d
imagesize
writeClipboard(imagesize)
readClipboard(l1)
readClipboard()
d
imagesize
out<-paste0(allfolders[[fileindex]],"/earcrp/", list.files(allfolders[[fileindex]], pattern = ".vol"),".tif")
out<-gsub(".vol","",out)
out
writeClipboard(out)
fileindex<-2
paste()
#volume file
l1<-paste0("open=[",list.files(allfolders[fileindex], pattern = ".vol", full.names = T),"]")
l1
#writeClipboard(l1)
#vgi file
d<-list.files(allfolders[[fileindex]], pattern = ".vgi", full.names = T)
k<-readLines(d)[3]
writeClipboard(readLines(d)[3])
split<-strsplit(k, " ")
imagesize<-paste0(" image=[16-bit Unsigned] ",
"width=",split[[1]][3], " height=",split[[1]][4], " number=",split[[1]][5],
" little-endian")
d
imagesize
writeClipboard(imagesize)
paste0(l1,imagesize)
writeClipboard(paste0(l1,imagesize))
out<-paste0(allfolders[[fileindex]],"/earcrp/", list.files(allfolders[[fileindex]], pattern = ".vol"),".tif")
out<-gsub(".vol","",out)
out
writeClipboard(out)
fileindex<-3
#volume file
l1<-paste0("open=[",list.files(allfolders[fileindex], pattern = ".vol", full.names = T),"]")
l1
#writeClipboard(l1)
#vgi file
d<-list.files(allfolders[[fileindex]], pattern = ".vgi", full.names = T)
k<-readLines(d)[3]
writeClipboard(readLines(d)[3])
split<-strsplit(k, " ")
imagesize<-paste0(" image=[16-bit Unsigned] ",
"width=",split[[1]][3], " height=",split[[1]][4], " number=",split[[1]][5],
" little-endian")
d
imagesize
writeClipboard(imagesize)
writeClipboard(paste0(l1,imagesize))
out<-paste0(allfolders[[fileindex]],"/earcrp/", list.files(allfolders[[fileindex]], pattern = ".vol"),".tif")
out<-gsub(".vol","",out)
out
writeClipboard(out)
fileindex<-4
#volume file
l1<-paste0("open=[",list.files(allfolders[fileindex], pattern = ".vol", full.names = T),"]")
l1
#writeClipboard(l1)
#vgi file
d<-list.files(allfolders[[fileindex]], pattern = ".vgi", full.names = T)
k<-readLines(d)[3]
writeClipboard(readLines(d)[3])
split<-strsplit(k, " ")
imagesize<-paste0(" image=[16-bit Unsigned] ",
"width=",split[[1]][3], " height=",split[[1]][4], " number=",split[[1]][5],
" little-endian")
d
imagesize
writeClipboard(imagesize)
writeClipboard(paste0(l1,imagesize))
#save
out<-paste0(allfolders[[fileindex]],"/earcrp/", list.files(allfolders[[fileindex]], pattern = ".vol"),".tif")
out<-gsub(".vol","",out)
out
writeClipboard(out)
fileindex<-5
#volume file
l1<-paste0("open=[",list.files(allfolders[fileindex], pattern = ".vol", full.names = T),"]")
l1
#writeClipboard(l1)
#vgi file
d<-list.files(allfolders[[fileindex]], pattern = ".vgi", full.names = T)
k<-readLines(d)[3]
writeClipboard(readLines(d)[3])
split<-strsplit(k, " ")
imagesize<-paste0(" image=[16-bit Unsigned] ",
"width=",split[[1]][3], " height=",split[[1]][4], " number=",split[[1]][5],
" little-endian")
d
imagesize
writeClipboard(imagesize)
writeClipboard(paste0(l1,imagesize))
writesave<-function(fileindex){
#save
out<-paste0(allfolders[[fileindex]],"/earcrp/", list.files(allfolders[[fileindex]], pattern = ".vol"),".tif")
out<-gsub(".vol","",out)
out
writeClipboard(out)
}
writesave(5)
E:/August scans backup/Aug 25/SI02/earcrp/25082020_02 SI-02-2019.tif
writesave(4)
E:/August scans backup/Aug 25/SGHB/earcrp/25082020_05 SGHB-02-2019.tif
writesave(5)
writeopen<-function(fileindex){
#volume file
l1<-paste0("open=[",list.files(allfolders[fileindex], pattern = ".vol", full.names = T),"]")
l1
#writeClipboard(l1)
#vgi file
d<-list.files(allfolders[[fileindex]], pattern = ".vgi", full.names = T)
k<-readLines(d)[3]
writeClipboard(readLines(d)[3])
split<-strsplit(k, " ")
imagesize<-paste0(" image=[16-bit Unsigned] ",
"width=",split[[1]][3], " height=",split[[1]][4], " number=",split[[1]][5],
" little-endian")
d
imagesize
writeClipboard(paste0(l1,imagesize))
}
direct<-"E:/August scans backup/Aug 26"
allfolders<-list.dirs(direct, recursive = F)
#create directories
for (i in seq_along(allfolders)){
dir.create(paste0(allfolders[[i]],"/earcrp"), recursive = TRUE)
}
allfolders
direct<-"E:/August scans backup/Aug 27"
allfolders<-list.dirs(direct, recursive = F)
#create directories
for (i in seq_along(allfolders)){
dir.create(paste0(allfolders[[i]],"/earcrp"), recursive = TRUE)
}
direct<-"E:/August scans backup/Aug 26"
allfolders<-list.dirs(direct, recursive = F)
writeopen(1)
open=[E:/August scans backup/Aug 26/ASEO02/26082020_02 ASEO-02-2019.vol] image=[16-bit Unsigned] width=2013 height=2013 number=1604 little-endian
fileindex<-1
writesave()
writesave(1)
fileindex<-2
writeopen(fileindex)
writesave(fileindex)
writesave(fileindex)
fileindex<-3
writeopen(fileindex)
writesave(fileindex)
fileindex<-4
writeopen(fileindex)
writesave(fileindex)
fileindex<-4
writeopen(fileindex)
fileindex<-5
writeopen(fileindex)
writesave(fileindex)
run("Make Substack...", "  slices=599-1106");
fileindex<-6
writeopen(fileindex)
writesave(fileindex)
fileindex<-7
writeopen(fileindex)
writesave(fileindex)
fileindex<-8
writeopen(fileindex)
writesave(fileindex)
fileindex<-9
writeopen(fileindex)
writesave(fileindex)
direct<-"E:/August scans backup/Aug 27"
allfolders<-list.dirs(direct, recursive = F)
fileindex<-1
writeopen(fileindex)
writesave(fileindex)
fileindex<-2
writeopen(fileindex)
writesave(fileindex)
fileindex<-3
writeopen(fileindex)
writesave(fileindex)
fileindex<-4
writeopen(fileindex)
writesave(fileindex)
inputdirect<-"E:/Input/Sept 25_2020"
dir.create(inputdirect)
KP01MA<- "D:\August scans backup\Aug 26\KP01MA\earcrp"
MP01<- "D:\August scans backup\Aug 26\MP01\earcrp"
WA01<- "D:\August scans backup\Aug 26\WA01\earcrp"
BBA01<-"D:\August scans backup\Aug 26\BBA01\earcrp"
ASEO02<-"D:\August scans backup\Aug 26\ASEO02\earcrp"
GRSH01<-"D:\August scans backup\Aug 27\GRSH01\earcrp"
SWG01<-"D:\August scans backup\Aug 26\SWG01\earcrp"
KP01MA<- "D:/August scans backup/Aug 26/KP01MA/earcrp"
ls()
KP01MA<- "D:/August scans backup/Aug 26/KP01MA/earcrp"
MP01<- "D:/August scans backup/Aug 26/MP01/earcrp"
WA01<- "D:/August scans backup/Aug 26/WA01/earcrp"
BBA01<-"D:/August scans backup/Aug 26/BBA01/earcrp"
ASEO02<-"D:/August scans backup/Aug 26/ASEO02/earcrp"
GRSH01<-"D:/August scans backup/Aug 27/GRSH01/earcrp"
SWG01<-"D:/August scans backup/Aug 26/SWG01/earcrp"
ls()
writeClipboard(ls())
directs<- c(ASEO02,
BBA01,
GRSH01,
KP01MA,
MP01,
SWG01,
WA01)
folders<- c("ASEO02", "BBA01" , "GRSH01", "KP01MA", "MP01" ,  "SWG01" , "WA01" )
inputdirect<-"E:/Input/Sept 25_2020"
##############################create separate folders for each specimen
for (i in seq_along(folders)){
dir.create(paste0(inputdirect,"/",folders[i]))
}
#FCSV - put lists of files for each species into a master list of lists
fcsvmasterlist<-list()
for (i in seq_along(directs)){
fcsvmasterlist[[i]]<-list.files(directs[i], pattern = ".fcsv", recursive = FALSE, full.names = TRUE)
}
#FCSV - place the files directly in the folders assigned to them
for (i in seq_along(fcsvmasterlist)){
for (j in seq_along(1:10)){
file.copy(fcsvmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
#STL - put lists of files for each species into a master list of lists
stlmasterlist<-list()
for (i in seq_along(directs)){
stlmasterlist[[i]]<-list.files(directs[i], pattern = ".stl", recursive = FALSE, full.names = TRUE)
}
#STL - place the files directly in the folders assigned to them
for (i in seq_along(stlmasterlist)){
for (j in seq_along(1:10)){
file.copy(stlmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
LD01<-"D:/0backof head analyses/6_Feb12crops/LD-01-2019/crpcorrectAug5"
directs<-LD01
folders<-"LD01"
inputdirect<-"E:/Input/Sept 25_2020"
for (i in seq_along(folders)){
dir.create(paste0(inputdirect,"/",folders[i]))
}
#FCSV - put lists of files for each species into a master list of lists
fcsvmasterlist<-list()
for (i in seq_along(directs)){
fcsvmasterlist[[i]]<-list.files(directs[i], pattern = ".fcsv", recursive = FALSE, full.names = TRUE)
}
#FCSV - place the files directly in the folders assigned to them
for (i in seq_along(fcsvmasterlist)){
for (j in seq_along(1:10)){
file.copy(fcsvmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
#STL - put lists of files for each species into a master list of lists
stlmasterlist<-list()
for (i in seq_along(directs)){
stlmasterlist[[i]]<-list.files(directs[i], pattern = ".stl", recursive = FALSE, full.names = TRUE)
}
#STL - place the files directly in the folders assigned to them
for (i in seq_along(stlmasterlist)){
for (j in seq_along(1:10)){
file.copy(stlmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
Ngannet<-"F:/0morphosource witmer/northerngannet/OUVC_10995_M42184-76028/earregion"
TD<-"F:/0CT Scans/3_Jul19 2019/19072019_06 TD01 rescan/earcrp Aug 5 2020"
writeClipboard(ls())
TD01<-"F:/0CT Scans/3_Jul19 2019/19072019_06 TD01 rescan/earcrp Aug 5 2020"
directs<-c(Ngannet,TD01)
directs<-c(Ngannet,TD01)
folders<-c("Ngannet","TD01")
inputdirect<-"E:/Input/Sept 25_2020"
for (i in seq_along(folders)){
dir.create(paste0(inputdirect,"/",folders[i]))
}
#FCSV - put lists of files for each species into a master list of lists
fcsvmasterlist<-list()
for (i in seq_along(directs)){
fcsvmasterlist[[i]]<-list.files(directs[i], pattern = ".fcsv", recursive = FALSE, full.names = TRUE)
}
#FCSV - place the files directly in the folders assigned to them
for (i in seq_along(fcsvmasterlist)){
for (j in seq_along(1:10)){
file.copy(fcsvmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
#STL - put lists of files for each species into a master list of lists
stlmasterlist<-list()
for (i in seq_along(directs)){
stlmasterlist[[i]]<-list.files(directs[i], pattern = ".stl", recursive = FALSE, full.names = TRUE)
}
#STL - place the files directly in the folders assigned to them
for (i in seq_along(stlmasterlist)){
for (j in seq_along(1:10)){
file.copy(stlmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
Ngannet<-"F:/0morphosource witmer/northerngannet/OUVC_10995_M42184-76028/crp aug 5"
directs<-c(Ngannet,TD01)
folders<-c("Ngannet","TD01")
directs<-Ngannet
folders<-"Ngannet"
inputdirect<-"E:/Input/Sept 25_2020"
for (i in seq_along(folders)){
dir.create(paste0(inputdirect,"/",folders[i]))
}
#FCSV - put lists of files for each species into a master list of lists
fcsvmasterlist<-list()
for (i in seq_along(directs)){
fcsvmasterlist[[i]]<-list.files(directs[i], pattern = ".fcsv", recursive = FALSE, full.names = TRUE)
}
#FCSV - place the files directly in the folders assigned to them
for (i in seq_along(fcsvmasterlist)){
for (j in seq_along(1:10)){
file.copy(fcsvmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
#STL - put lists of files for each species into a master list of lists
stlmasterlist<-list()
for (i in seq_along(directs)){
stlmasterlist[[i]]<-list.files(directs[i], pattern = ".stl", recursive = FALSE, full.names = TRUE)
}
#STL - place the files directly in the folders assigned to them
for (i in seq_along(stlmasterlist)){
for (j in seq_along(1:10)){
file.copy(stlmasterlist[[i]][j], paste0(inputdirect,"/",folders[i]), copy.date = TRUE)
}
}
# import libraries
library(Morpho)#read.mpp function
library(geomorph)#digit curves function
library(rgl)#plotting
#####################################
######################################LOAD DATA
#
index<-8
Volume<- "E"
batch<- "Sept 25_2020"
inputfolder<- paste0(Volume,":/Input/",batch)
#dir.create(paste0(Volume,":/Outputs/Singlevalues/",batch))#do only once at beginning
#check files are all there for calculations
source("E:/0earmeasures/Scan_measurements/checkfiles.R")
lengths
# import libraries
library(Morpho)#read.mpp function
library(geomorph)#digit curves function
library(rgl)#plotting
#####################################
######################################LOAD DATA
#
index<-8
Volume<- "E"
batch<- "Sept 25_2020"
inputfolder<- paste0(Volume,":/Input/",batch)
#dir.create(paste0(Volume,":/Outputs/Singlevalues/",batch))#do only once at beginning
#check files are all there for calculations
source("E:/0earmeasures/Scan_measurements/checkfiles.R")
lengths
#####################################RUN CALCULATIONS
source("E:/0earmeasures/Scan_measurements/run calculations.R")
#####################################
#
#####################3
#################### CHECK WIREFRAME PLOTS
#plot wireframe diagram of ear based input corrdinates. Will prompt for the 3D *.stl file for the columella
setwd(paste0(Volume,":/0earmeasures/Scan_measurements/"))
source("plot_ear_auto_STL.R")
colmodel4<-readSTL(file.choose())#a
#plot wireframe diagram of ear based input corrdinates. Will prompt for the 3D *.stl file for the columella
setwd(paste0(Volume,":/0earmeasures/Scan_measurements/"))
source("plot_ear_auto_STL.R")
##EXPORT#############
####CHECK OUTPUT PATH DRIVE IS GOING TO CORRECT USB/ HARD DRIVE"
#set output paths for saving the computed values
outputpathsingles<-paste0(Volume,":/Outputs/Singlevalues/",batch)#calculated values
outputpathangles<-paste0(Volume,":/Outputs/TM angles/")#angles for all
outputpathcoords<-paste0(Volume,":/Outputs/Coordinates/")# all computed coordinates on a single csv file
snapshotpath<-paste0(Volume,":/Outputs/Snapshots/")#directory for wirefram snapshots
outputfcsv<-paste0(Volume,":/Outputs/FCSVs/")
STLpath<-paste0(Volume,":/Outputs/STLs/")
#Save the computations and coordinates
setwd(paste0(Volume,":/0earmeasures/Scan_measurements/"))
source("outputs.R")
ID
#for (i in seq_along(stl)){
#file.copy(from = stl[i], to = paste0(outputfcsv,ID,"/"))
#}
